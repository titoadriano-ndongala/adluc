{% extends "base.html" %}

{% block conteudo %}
<h2>Oportunidades Disponíveis</h2>

<div class="layout-vagas">
    <!-- BOTÃO TOGGLE (mobile) -->
    <button class="btn btn-primario toggle-filtros" onclick="toggleFiltros()">Filtros</button>

    <!-- FILTROS -->
    <aside class="filtros" id="sidebar-filtros">
        <h3>Pesquisa Avançada</h3>
        <form method="GET" action="/vagas">
            <label for="cidade">Cidade:</label>
            <input type="text" id="cidade" name="cidade">

            <label for="horario">Tipo de Horário:</label>
            <select id="horario" name="horario">
                <option value="">-- Escolher --</option>
                <option value="full-time">Full-time</option>
                <option value="part-time">Part-time</option>
                <option value="remoto">Remoto</option>
            </select>

            <label for="tipo">Tipo de Oportunidade:</label>
            <select id="tipo" name="tipo">
                <option value="">-- Escolher --</option>
                <option value="emprego">Emprego</option>
                <option value="estagio">Estágio</option>
                <option value="bolsa">Bolsa</option>
            </select>

            <button type="submit" class="btn btn-sucesso">Filtrar</button>
        </form>
    </aside>

    <!-- LISTAGEM DE VAGAS -->
    <section class="vagas-lista">
        {% for vaga in vagas %}
            <div class="card vaga-card">
                <h3>{{ vaga.titulo }}</h3>
                <p><b>Categoria:</b> {{ vaga.categoria }}</p>
                <p><b>Cidade:</b> {{ vaga.cidade }}</p>
                <p><b>Horário:</b> {{ vaga.horario }}</p>
                <p><b>Tipo:</b> {{ vaga.tipo }}</p>
                <p>{{ vaga.descricao[:120] }}...</p>

                <a href="{{ url_for('detalhes_vaga', vaga_id=vaga.id) }}" class="btn btn-primario">Ver detalhes</a>
            </div>
        {% else %}
            <p>Nenhuma vaga disponível no momento.</p>
        {% endfor %}
    </section>
</div>
{% endblock %}
