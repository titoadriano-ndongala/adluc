{% extends "base.html" %}
{% block conteudo %}

<h2 style="margin:20px 0;font-size:24px;color:#333;">Minhas Candidaturas</h2>

<div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:20px;">

  {% for cand in candidaturas %}
    <div
      style="background:#fff;border-radius:10px;padding:20px;box-shadow:0 2px 6px rgba(0,0,0,.1);
             transition:all .3s ease;cursor:pointer;"
      onmouseover="this.style.transform='translateY(-5px)';this.style.boxShadow='0 6px 16px rgba(0,0,0,0.15)';"
      onmouseout="this.style.transform='translateY(0)';this.style.boxShadow='0 2px 6px rgba(0,0,0,.1)';"
    >
      <h3 style="margin:0;font-size:18px;color:#222;">{{ cand.vaga.titulo }}</h3>
      <p style="font-size:14px;color:#555;margin:8px 0 12px;line-height:1.5;">
        Vaga em <b>{{ cand.vaga.cidade or "Não especificado" }}</b> —
        <span style="color:#882bbf;">{{ cand.vaga.categoria or "Sem categoria" }}</span>
      </p>

      <div style="display:flex;justify-content:space-between;align-items:center;">

        <!-- Link para detalhes da vaga -->
        <a href="{% if cand.vaga.externa %}{{ cand.vaga.link_externo }}{% else %}{{ url_for('detalhes_vaga', vaga_id=cand.vaga.id) }}{% endif %}"
           {% if cand.vaga.externa %}target="_blank"{% endif %}
           style="text-decoration:none;background:#882bbf;color:#fff;padding:8px 14px;border-radius:6px;
                  font-size:14px;font-weight:600;transition:background .3s;"
           onmouseover="this.style.background='#2c0f3e';"
           onmouseout="this.style.background='#c565fa';">
          Ver Vaga
        </a>

        <!-- Baixar CV -->
        <a href="{{ url_for('download_cv', filename=cand.ficheiro_cv) }}"
           style="text-decoration:none;background:#27ae60;color:#fff;padding:8px 14px;border-radius:6px;
                  font-size:14px;font-weight:600;transition:background .3s;"
           onmouseover="this.style.background='#1e8449';"
           onmouseout="this.style.background='#27ae60';">
          Ver meu CV enviado
        </a>

      </div>
    </div>
  {% else %}
    <p style="color:#777;">Ainda não submeteu candidaturas.</p>
  {% endfor %}
</div>
{% endblock %}
